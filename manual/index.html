<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Strict//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-strict.dtd">

<html xmlns="http://www.w3.org/1999/xhtml" lang="en" xml:lang="en">

<head>
  <META HTTP-EQUIV="Content-Type" CONTENT="text/html; charset=utf-8">
  <title>Intro to CIUnit (part of fooStack) for CodeIgniter</title>
  
  <style type='text/css' media='all'>@import url('./userguide.css');</style>
  <link rel="stylesheet" type="text/css" href="userguide.css" />
  
<script type="text/javascript" src="./nav/nav.js"></script>
<script type="text/javascript" src="./nav/prototype.lite.js"></script>
<script type="text/javascript" src="./nav/moo.fx.js"></script>
<script type="text/javascript" src="./nav/user_guide_menu.js"></script>

<meta http-equiv='expires' content='-1' />
<meta http-equiv= 'pragma' content='no-cache' />
<meta name='robots' content='all' />
</head>

<body>

<!-- START NAVIGATION -->
<div id="nav"><div id="nav_inner"><script type="text/javascript">create_menu('./');</script></div></div>
<div id="nav2"><a name="top"></a><a href="javascript:void(0);" onclick="myHeight.toggle();"><img src="./images/nav_toggle_darker.jpg" width="154" height="43" border="0" title="Toggle Table of Contents" alt="Toggle Table of Contents" /></a></div>
<div id="masthead">
<table cellpadding="0" cellspacing="0" border="0" style="width:100%">
<tr>
<td><h1>fooStack for CodeIgniter</h1></td>
<td id="breadcrumb_right"><a href="#">Right Breadcrumb</a></td>
</tr>
</table>
</div>
<!-- END NAVIGATION -->

<!-- START BREADCRUMB -->
<table cellpadding="0" cellspacing="0" border="0" style="width:100%">
<tr>
<td id="breadcrumb">
<a href="http://example.com/">Project Home</a> &nbsp;&#8250;&nbsp;
<a href="#">User Guide Home</a> &nbsp;&#8250;&nbsp;
Foo Class
</td>
<td id="searchbox"><form method="get" action="http://www.google.com/search"><input type="hidden" name="as_sitesearch" id="as_sitesearch" value="example.com/user_guide/" />Search Project User Guide&nbsp; <input type="text" class="input" style="width:200px;" name="q" id="q" size="31" maxlength="255" value="" />&nbsp;<input type="submit" class="submit" name="sa" value="Go" /></form></td>
</tr>
</table>
<!-- END BREADCRUMB -->

<!-- START CONTENT -->
<div id="content">

<!--
/*
* fooStack, Codeigniter Plugin for Unit testing and more
* Copyright (c) 2008-2009 Clemens Gruenberger,
* <clem@fragment.at>
* Released under the MIT license, see:
* http://www.opensource.org/licenses/mit-license.php
*/
-->

<h2>CIUnit: Unit testing for CodeIgniter</h2>
<p>
CIUnit is a cool bridge between your CodeIgniter application and phpUnit.
</p>


<ul>
  <li>CodeIgniter 1.6.0+ ( tested with 1.6.X, 1.7.0, 1.7.1 and <b>1.7.2</b> )</li>
  <li>PHP 5.1+</li>
</ul>

<p><a href="fooStack_v0.17.zip">Download the current <b>fooStack v0.17</b> - for CI 1.7.2 here!</a></p>
<p><a href="fooStack_v0.15.zip">Download the slightly outdated <b>fooStack v0.15</b> here - for CI 1.6.X, 1.7.1</a></p>
<b>For v0.15.zip please be aware that the installation is slightly different! Have a look at the index.html file included in fooStack_v0.15.zip</b>

<p style='font-size: 0.9em; font-style: italic;'>(The cutting edge development version and older versions are accessible through 
the public mercurial repository at <a href="http://www.bitbucket.org/rafsoaken/ciunit/overview/">bitbucket.org / ciunit</a>)</p>

<p>
<h2>2 minute Setup:</h2>
</p>

<ol>
  <li>Download and unzip the fooStack package in a temporary folder</li>
  <li>Copy the fooStack directory in your "YourProject/system/application/libraries" directory</li>
  <li>Copy the tests directory in your "YourProject/system/application" directory</li>
  <li>If you don't use the standard layout for your CodeIgniter project, change the first 2 paths in the file "YourProject/system/application/libraries/fooStack/fooBase/index.php"</li>
  <li>Replace the line that starts with <pre>$active_group =</pre> in your database.php ("YourProject/system/application/config" directory) with:<br />

<pre>
$env_used = 'default'; //name of your development setting
if(defined('CIUnit_Version')){
  $env_used .= '_test';
}
$active_group = $env_used;</pre></li>
  
  <li>Create a new database setting that will act as the test database (it will always be cleared when you run tests!), 
  that is named like your development setting but with a trailing '_test'. <b>Note:</b> CIUnit fixtures will insist on the trailing '_test' to prevent accidental data loss.</li> 
    
</ol>

<p><b>Congratulations you are done with setting up fooStack!</b></p>
<p>Oh, wait, do you have phpUnit already installed?</p> 
<p><a href="http://www.phpunit.de/manual/current/en/installation.html">http://www.phpunit.de/manual/current/en/installation.html</a></p>

<p>Once you have fooStack and phpUnit running:</p>

<h3>Run tests:</h3>
<ul>
  <li>Run all tests from within the tests directory: "phpunit AllTests.php", or use "phpunit --verbose AllTests.php" for more detailed output</li>
  <li>Run only a subgroup of tests, eg model tests, go into the tests/models directory and run "phpunit ModelAllTests.php"</li>
  <li>Consequently, for running just one particular test, change to this test's directory and type "phpunit testSomeStuff.php"</li>  
</ul>

<h3>Generating database fixtures:</h3>
<p>
Given you have tables in your test database (you should have the same as in the development database!), you can generate empty yaml fixtures like so:
From within the tests directory type (make sure the fixtures directory is writable!):
<pre>php generate fixtures</pre>
The fixture files are then available in the tests/fixtures directory.
</p>
<p>
Using the fixtures is easy:
Fill the yaml fixture files with the fixture data needed (<a href="http://en.wikipedia.org/wiki/YAML">yaml is a easily readable format for your data</a>). 
Once this is done, call e.g. <pre>$this->dbfixt('items', 'comments', 'users'); </pre> from within the test setup function. Then these table fixtures are assured to be loaded into your test database AND are available as test variables like so:
<pre>$this->items_fixt, $this->comments_fixt, $this->users_fixt.</pre> E.g the second row of data in the comments table in your tests database 
is also available through <pre>$this->comments_fixt['second'];</pre>
</p>

<h3>CIUnit tests itself</h3>
<p>
Without writing any tests, typing "phpunit CIUnitAllTests.php" from within the "YourProject/application/tests/ciunit" directory will already run a couple of tests - these make sure that CIUnit is correctly installed and works as expected.
</p>
</div>
<!-- END CONTENT -->


<div id="footer">
<p>
Previous Topic:&nbsp;&nbsp;<a href="#">Previous Class</a>
&nbsp;&nbsp;&nbsp;&middot;&nbsp;&nbsp;
<a href="#top">Top of Page</a>&nbsp;&nbsp;&nbsp;&middot;&nbsp;&nbsp;
<a href="#">User Guide Home</a>&nbsp;&nbsp;&nbsp;&middot;&nbsp;&nbsp;
Next Topic:&nbsp;&nbsp;<a href="#">Next Class</a>
</p>
<p><a href="http://codeigniter.com">CodeIgniter</a> &nbsp;&middot;&nbsp; Copyright &#169; 2006-2010 &nbsp;&middot;&nbsp; <a href="http://ellislab.com/">Ellislab, Inc.</a></p>
</div>

</body>
</html>